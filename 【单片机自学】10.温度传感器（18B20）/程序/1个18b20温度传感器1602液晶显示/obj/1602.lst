C51 COMPILER V9.01   1602                                                                  02/14/2012 11:16:48 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE 1602
OBJECT MODULE PLACED IN .\obj\1602.obj
COMPILER INVOKED BY: D:\C51\BIN\C51.EXE 1602.c BROWSE DEBUG OBJECTEXTEND PRINT(.\obj\1602.lst) OBJECT(.\obj\1602.obj)

line level    source

   1          /*-----------------------------------------------
   2                  Ãû³Æ£ºLCD1602
   3                  ¹«Ë¾£º¼ÃÄÏ²©Ð¾µç×Ó
   4                  
   5                  ÂÛÌ³£ºhttp://bxmcu.vicp.net:8080
   6                  ±àÐ´£º
   7                  ÐÞ¸Ä£ºÎÞ
   8                  °æ±¾£ºVersion 1.0
   9                  Òý½Å¶¨ÒåÈçÏÂ£º1-VSS 2-VDD 3-V0 4-RS 5-R/W 6-E 7-14 DB0-DB7 15-BLA 16-BLK
  10          ------------------------------------------------*/
  11          #include "1602.h"
  12          #include "delay.h"
  13          
  14          sbit RS = P2^4;   //¶¨Òå¶Ë¿Ú 
  15          sbit RW = P2^5;
  16          sbit EN = P2^6;
  17          
  18          #define RS_CLR RS=0 
  19          #define RS_SET RS=1
  20          
  21          #define RW_CLR RW=0 
  22          #define RW_SET RW=1 
  23          
  24          #define EN_CLR EN=0
  25          #define EN_SET EN=1
  26          
  27          #define DataPort P0
  28          
  29          /*------------------------------------------------
  30                        ÅÐÃ¦º¯Êý
  31          ------------------------------------------------*/
  32           bit LCD_Check_Busy(void) 
  33           { 
  34   1       DataPort= 0xFF; 
  35   1       RS_CLR; 
  36   1       RW_SET; 
  37   1       EN_CLR; 
  38   1       _nop_(); 
  39   1       EN_SET;
  40   1       return (bit)(DataPort & 0x80);
  41   1       }
  42          /*------------------------------------------------
  43                        Ð´ÈëÃüÁîº¯Êý
  44          ------------------------------------------------*/
  45           void LCD_Write_Com(unsigned char com) 
  46           {  
  47   1       while(LCD_Check_Busy()); //Ã¦ÔòµÈ´ý
  48   1       RS_CLR; 
  49   1       RW_CLR; 
  50   1       EN_SET; 
  51   1       DataPort= com; 
  52   1       _nop_(); 
  53   1       EN_CLR;
  54   1       }
  55          /*------------------------------------------------
C51 COMPILER V9.01   1602                                                                  02/14/2012 11:16:48 PAGE 2   

  56                        Ð´ÈëÊý¾Ýº¯Êý
  57          ------------------------------------------------*/
  58           void LCD_Write_Data(unsigned char Data) 
  59           { 
  60   1       while(LCD_Check_Busy()); //Ã¦ÔòµÈ´ý
  61   1       RS_SET; 
  62   1       RW_CLR; 
  63   1       EN_SET; 
  64   1       DataPort= Data; 
  65   1       _nop_();
  66   1       EN_CLR;
  67   1       }
  68          
  69          /*------------------------------------------------
  70                          ÇåÆÁº¯Êý
  71          ------------------------------------------------*/
  72           void LCD_Clear(void) 
  73           { 
  74   1       LCD_Write_Com(0x01); 
  75   1       DelayMs(5);
  76   1       }
  77          /*------------------------------------------------
  78                        Ð´Èë×Ö·û´®º¯Êý
  79          ------------------------------------------------*/
  80           void LCD_Write_String(unsigned char x,unsigned char y,unsigned char *s) 
  81           {     
  82   1       if (y == 0) 
  83   1              {     
  84   2               LCD_Write_Com(0x80 + x);     //±íÊ¾µÚÒ»ÐÐ
  85   2              }
  86   1       else 
  87   1              {      
  88   2              LCD_Write_Com(0xC0 + x);      //±íÊ¾µÚ¶þÐÐ
  89   2              }        
  90   1       while (*s) 
  91   1              {     
  92   2       LCD_Write_Data( *s);     
  93   2       s ++;     
  94   2              }
  95   1       }
  96          /*------------------------------------------------
  97                        Ð´Èë×Ö·ûº¯Êý
  98          ------------------------------------------------*/
  99           void LCD_Write_Char(unsigned char x,unsigned char y,unsigned char Data) 
 100           {     
 101   1       if (y == 0) 
 102   1              {     
 103   2              LCD_Write_Com(0x80 + x);     
 104   2              }    
 105   1       else 
 106   1              {     
 107   2              LCD_Write_Com(0xC0 + x);     
 108   2              }        
 109   1       LCD_Write_Data( Data);  
 110   1       }
 111          /*------------------------------------------------
 112                        ³õÊ¼»¯º¯Êý
 113          ------------------------------------------------*/
 114           void LCD_Init(void) 
 115           {
 116   1         LCD_Write_Com(0x38);    /*ÏÔÊ¾Ä£Ê½ÉèÖÃ*/ 
 117   1         DelayMs(5); 
C51 COMPILER V9.01   1602                                                                  02/14/2012 11:16:48 PAGE 3   

 118   1         LCD_Write_Com(0x38); 
 119   1         DelayMs(5); 
 120   1         LCD_Write_Com(0x38); 
 121   1         DelayMs(5); 
 122   1         LCD_Write_Com(0x38);  
 123   1         LCD_Write_Com(0x08);    /*ÏÔÊ¾¹Ø±Õ*/ 
 124   1         LCD_Write_Com(0x01);    /*ÏÔÊ¾ÇåÆÁ*/ 
 125   1         LCD_Write_Com(0x06);    /*ÏÔÊ¾¹â±êÒÆ¶¯ÉèÖÃ*/ 
 126   1         DelayMs(5); 
 127   1         LCD_Write_Com(0x0C);    /*ÏÔÊ¾¿ª¼°¹â±êÉèÖÃ*/
 128   1         }
 129          /*------------------------------------------------   
 130          Éè¶¨¶þ¸ö×Ô¶¨Òå×Ö·û,LCD1602ÖÐ×Ô¶¨Òå×Ö·ûµÄµØÖ·Îª0x00--0x07,
 131          ¼´¿É¶¨Òå8¸ö×Ö·û
 132          ÕâÀïÎÒÃÇÉè¶¨°ÑÒ»¸ö×Ô¶¨Òå×Ö·û·ÅÔÚ0x00Î»ÖÃ£¨000£©,
 133          ÁíÒ»¸ö·ÅÔÚ0x01Î»×Ó£¨001£©
 134          ------------------------------------------------*/
 135          void Lcd_User_Chr(void)
 136          { //µÚÒ»¸ö×Ô¶¨Òå×Ö·û
 137   1       LCD_Write_Com(0x40); //"01 000 000"  µÚ1ÐÐµØÖ· (D7D6ÎªµØÖ·Éè¶¨ÃüÁîÐÎÊ½£DD5D4D3Îª×Ö·û´æ·ÅÎ»ÖÃ(0--7)£¬D2D1D
             -0Îª×Ö·ûÐÐµØÖ·(0--7)£©
 138   1       LCD_Write_Data(0x00); //"XXX 11111" µÚ1ÐÐÊý¾Ý£¨D7D6D5ÎªXXX£¬±íÊ¾ÎªÈÎÒâÊý(Ò»°ãÓÃ000£©£¬D4D3D2D1D0Îª×Ö·ûÐÐÊ
             -ý¾Ý(1-µãÁÁ£¬0-Ï¨Ãð£©
 139   1       LCD_Write_Com(0x41); //"01 000 001"  µÚ2ÐÐµØÖ·
 140   1       LCD_Write_Data(0x04); //"XXX 10001" µÚ2ÐÐÊý¾Ý
 141   1       LCD_Write_Com(0x42); //"01 000 010"  µÚ3ÐÐµØÖ·
 142   1       LCD_Write_Data(0x0e); //"XXX 10101" µÚ3ÐÐÊý¾Ý
 143   1       LCD_Write_Com(0x43); //"01 000 011"  µÚ4ÐÐµØÖ·
 144   1       LCD_Write_Data(0x0e); //"XXX 10001" µÚ4ÐÐÊý¾Ý
 145   1       LCD_Write_Com(0x44); //"01 000 100"  µÚ5ÐÐµØÖ·
 146   1       LCD_Write_Data(0x0e); //"XXX 11111" µÚ5ÐÐÊý¾Ý
 147   1       LCD_Write_Com(0x45); //"01 000 101"  µÚ6ÐÐµØÖ·
 148   1       LCD_Write_Data(0x1f); //"XXX 01010" µÚ6ÐÐÊý¾Ý
 149   1       LCD_Write_Com(0x46); //"01 000 110"  µÚ7ÐÐµØÖ·
 150   1       LCD_Write_Data(0x04); //"XXX 11111" µÚ7ÐÐÊý¾Ý
 151   1       LCD_Write_Com(0x47); //"01 000 111"  µÚ8ÐÐµØÖ·
 152   1         LCD_Write_Data(0x00); //"XXX 00000" µÚ8ÐÐÊý¾Ý 
 153   1       //µÚ¶þ¸ö×Ô¶¨Òå×Ö·û
 154   1      
 155   1       LCD_Write_Com(0x48); //"01 001 000"  µÚ1ÐÐµØÖ·  
 156   1       LCD_Write_Data(0x03); //"XXX 00001" µÚ1ÐÐÊý¾Ý 
 157   1       LCD_Write_Com(0x49); //"01 001 001"  µÚ2ÐÐµØÖ·
 158   1       LCD_Write_Data(0x03); //"XXX 11011" µÚ2ÐÐÊý¾Ý
 159   1       LCD_Write_Com(0x4a); //"01 001 010"  µÚ3ÐÐµØÖ·
 160   1       LCD_Write_Data(0x00); //"XXX 11101" µÚ3ÐÐÊý¾Ý
 161   1       LCD_Write_Com(0x4b); //"01 001 011"  µÚ4ÐÐµØÖ·
 162   1       LCD_Write_Data(0x00); //"XXX 11001" µÚ4ÐÐÊý¾Ý
 163   1       LCD_Write_Com(0x4c); //"01 001 100"  µÚ5ÐÐµØÖ·
 164   1       LCD_Write_Data(0x00); //"XXX 11101" µÚ5ÐÐÊý¾Ý
 165   1       LCD_Write_Com(0x4d); //"01 001 101"  µÚ6ÐÐµØÖ·
 166   1       LCD_Write_Data(0x00); //"XXX 11011" µÚ6ÐÐÊý¾Ý
 167   1       LCD_Write_Com(0x4e); //"01 001 110"  µÚ7ÐÐµØÖ·
 168   1       LCD_Write_Data(0x00); //"XXX 00001" µÚ7ÐÐÊý¾Ý
 169   1       LCD_Write_Com(0x4f); //"01 001 111"  µÚ8ÐÐµØÖ·
 170   1       LCD_Write_Data(0x00); //"XXX 00000" µÚ8ÐÐÊý¾Ý 
 171   1       }
 172          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    309    ----
   CONSTANT SIZE    =   ----    ----
C51 COMPILER V9.01   1602                                                                  02/14/2012 11:16:48 PAGE 4   

   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
